<!DOCTYPE html>
<html>

<head>

  <script src="js/snap.svg-min.js"></script>
  <script src="../dist/snap.svg-min.js"></script>
  <script src="../jspsych.js"></script>
  <style>
    /*These styles are used to create the identifcation display*/
    * {
      box-sizing: border-box; 
    }
    
    .column {
      float: left;
      width: 25%;
      padding: 5px;
    }
    
    /* Clearfix (clear floats) */
    .row::after {
      content: "";
      clear: both;
      display: table;
    }
    </style>
    <style>
      
      </style>
  <script src="../plugins/jspsych-html-keyboard-response.js"></script>
  <script src="../plugins/jspsych-audio-keyboard-response.js"></script>
  <script src="../plugins/jspsych-image-keyboard-response.js"></script>
  <script src="../plugins/jspsych-visual-search-circle.js"></script>
  <script src="../plugins/jspsych-html-slider-response.js"></script>
  <script src="../plugins/jspsych-survey-multi-choice.js"></script>
  <script src="../plugins/jspsych-fixation-stim-6.3.js"></script>
  <script src="../plugins/jspsych-fixation-stim-try.js"></script>
  <script src="../plugins/jspsych-survey-text.js"></script>
  <script src="../plugins/jspsych-preload.js"></script>
  <script src="../tasks/draw_cue.js"></script>
  <script src="../tasks/draw_fixation.js"></script>
  <script src="../tasks/shuffleArray.js"></script>
  <link rel="stylesheet" href="../css/jspsych.css">
</head>
<body>
  <div id='stimuli-target' style='width:auto; height:auto; margin:5% auto;'></div>
  <canvas class = "canvas" id="cueCanvas"></canvas>
</body>
<script>

var timeline= [];

///Needed so that the images are in full resolution the first time they are shown.
  var preload_images = {
    type: 'preload',
    images: ['img/003.png', 'img/006.png', 'img/014.png', 'img/015.png', 'img/022.png','img/028.png','img/030.png', 'img/033.png','img/036.png', 'img/039.png','img/040.png','img/041.png','img/047.png', 'img/048.png', 'img/054.png', 'img/055.png', 'img/060.png','img/061.png','img/063.png', 'img/067.png','img/069.png', 'img/074.png','img/078.png','gimg/084.png','gimg/003.png', 'gimg/006.png', 'gimg/014.png', 'gimg/015.png', 'gimg/022.png','gimg/028.png','gimg/030.png', 'gimg/033.png','gimg/036.png', 'gimg/039.png','gimg/040.png','gimg/041.png','gimg/047.png', 'gimg/048.png', 'gimg/054.png', 'gimg/055.png', 'gimg/060.png','gimg/061.png','gimg/063.png', 'gimg/067.png','gimg/069.png', 'gimg/074.png','gimg/078.png','gimg/084.png']
  }


///All introductions
  var intro_1 = {
    type: 'html-keyboard-response',
    stimulus: 'Welcome to the experiment!'+  
     '<b><p>Press any button when you are ready to begin.<p/><b/>'
  }

  var intro_2 = {
    type: 'html-keyboard-response',
    stimulus: 'First, we are going to ask you two brief questions about your age and gender. <b><p>Press space bar to continue<p/><b/>'
  }

 
  var gender = {
      type: 'survey-multi-choice',
      questions: [
        {
      prompt: "Which gender best describes you?", 
      options: ['Male', 'Female'], 
      required: true,
      button_label: 'Continue'
        }
    ]
    }
  

    var age = {
  type: 'survey-text',
  questions: [
    {prompt: 'How old are you? Use numberic answers such as 19.',
    required: true,
    }
  ]
}

  var intro_5 = {
    type: 'html-keyboard-response',
    stimulus: 'This experiment will try to assess how effectively you can do two things: <p><b>1.)<b/> Direct your attention to locations.<p/> <p><b>2.)<b/> Report things you have seen.<p/> <p>Press space bar to continue.<p/>'
  }

  var intro_6 = {
    type: 'html-keyboard-response',
    stimulus: 'Each trial in the experiment follows a simple procedure. We will now show you how it will work. <b><p>Ready? Press the space bar to proceed.<p/><b/>'
  }

  var intro_7 = {
    type: 'html-keyboard-response',
    stimulus: 'At the start of each trial, a blue dot will appear. <b><p>Whenever the blue dot is on the screen, make sure you look at the dot!<p/><b/> <b><p>Press the space bar to see what the blue dot looks like.<p/><b/>'
  }

  var intro_dot = {
    type: 'visual-search-circle',
      fixation_image: 'img/blue.png',
      trial_duration: 1000,
      choices: jsPsych.NO_KEYS    
  }


  var intro_dot2 = {
    type: 'visual-search-circle',
      fixation_image: 'img/red dot.png',
      trial_duration: 1000,
      choices: jsPsych.NO_KEYS    
  }

  
///put pre-trial in between these

var intro_8 = {
    type: 'html-keyboard-response',
    stimulus: 'Whenever a trial is about to start, the blue dot changes to a red dot. <b><p>Press the space bar to see what this looks like.<p/><b/> '
  }

///red and blue dots 

var intro_9 = {
    type: 'html-keyboard-response',
    stimulus: '<p><b>Make sure to always looks at the blue or red dots whenever they are on the screen!<b/><p/> <p>After the dot turns red, images will appear on the screen. Your goal is to try to pay attention to <b>all eight images at once<b/>, and remember as many images as possible!<p/> We know this is difficult, but simply try to do the best you can! <b><p>Press space bar.<b/><p/>'
  }

  var intro_10 = {
    type: 'html-keyboard-response',
    stimulus: 'Keep in mind that when the images are presented, it will be tempting to try to look directly at them, <b>but we want you to keep looking at the dot the entire time!<b/> <b><p>Press space bar.<p/><b/>'
  }

var simmy = {
  target_present: true,
  set_size: 8
}

  var sim = {
    type: 'visual-search-circle',
    target: 'img/006.png',
    foil: ['img/014.png', 'img/015.png', 'img/022.png','img/028.png','img/030.png','img/033.png','img/036.png'],
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    trial_duration: 4000,
    timeline: [intro_dot, simmy]
   
  };

  var intro_11 = {
    type: 'html-keyboard-response',
    stimulus: 'In the real experiment, the images will be shown much more briefly than that example. <b><p>When the images are shown, you need to stay looking at the red dot, but please pay attention to all 8 images at once!<p><b/> <p>We know it is hard because they are in your visual periphery but try your best!<p/> Shortly after the images disappear, a line will be presented, which labels which location youll be asked about later on. <p>Press space bar to continue.<p/> '
  }

  var intro_12 = {
    type: 'html-keyboard-response',
    stimulus: 'After the line disappears, images will be presented a second time in a circle, and you will be asked one or two questions. <p>One question you will be asked on every trial is whether the image at the location of the line stayed the SAME, or CHANGED from the 1st to the 2nd presentation.<p> <b><p>Press space bar to try a few practice trials that focus on this question.<p/><b/>'
  }

  ////Trial runs 

  var intro_13 = {
    type: 'html-keyboard-response',
    stimulus: 'For the image the line pointed to, is it the SAME, or is it DIFFERENT from the first presentation at that location? <b><p>Press N if you think it stayed the SAME (NO CHANGE). Press C if you think it is DIFFERENT (CHANGE).<b/><p/>'
  }

  var intro_14 = {
    type: 'html-keyboard-response',
    stimulus: 'Now lets get you started on a practice block to get you ready for the real experiment. In this practice block, there are two things to note: <b><p>(1)Always keep your eyes on the dot when it is on the screen! We know its tempting to look away, especially after the line has been presented, but try to stay looking at the dot.<p/><b/> <b><p>(2) Do your best to pay attention to all 8 images during the first presentation!<p/> <p>Press space to start the practice.<p/><b/> '
  }

  
  ///possibly not needed 
  
   var intros = [preload_images, intro_1, fixation_redexample, intro_2, gender, age, intro_5, intro_6, intro_7, intro_dot, intro_8, intro_dot, intro_dot2, intro_9, intro_10, sim, intro_11, intro_12, intro_13, intro_14];

  ///fixation dot that occurs before apperance of prechange trial 
  var pre_trial = {
      fixation_image: 'img/blue.png',
      trial_duration: 1000,
      choices: jsPsych.NO_KEYS    
  }
  ///mediocre way of randomizing the images
  var yo = ['img/003.png', 'img/006.png', 'img/014.png', 'img/015.png', 'img/022.png','img/028.png','img/030.png', 'img/033.png','img/036.png', 'img/039.png','img/040.png','img/041.png','img/047.png', 'img/048.png', 'img/054.png', 'img/055.png', 'img/060.png','img/061.png','img/063.png', 'img/067.png','img/069.png', 'img/074.png','img/078.png','img/084.png']
  var yoyo = jsPsych.randomization.repeat(yo, 1);
  var yoyo2 =  jsPsych.randomization.repeat(yoyo, 1);
  var pics = [
    {v1: yoyo},
];
//randomizing grayscale images
var gyo = ['gimg/003.png', 'gimg/006.png', 'gimg/014.png', 'gimg/015.png', 'gimg/022.png','gimg/028.png','gimg/030.png', 'gimg/033.png','gimg/036.png', 'gimg/039.png','gimg/040.png','gimg/041.png','gimg/047.png', 'gimg/048.png', 'gimg/054.png', 'gimg/055.png', 'gimg/060.png','gimg/061.png','gimg/063.png', 'gimg/067.png','gimg/069.png', 'gimg/074.png','gimg/078.png','gimg/084.png']
  var gyoyo = jsPsych.randomization.repeat(gyo, 1);
  var gyoyo2 =  jsPsych.randomization.repeat(gyoyo, 1);
  var gpics = [
    {v1: gyoyo},
];

   
		var cue_size = 8;
    var circle_diameter = 400;
		var target_size = 125;

    var fixation = draw_fixation(cue_size);

    var canvas = document.getElementById("cueCanvas");
		var cueContext = cueCanvas.getContext("2d");
		 cueContext.canvas.width = circle_diameter + target_size;
		 cueContext.canvas.height = circle_diameter + target_size;

    var fixation_redexample = {
				type : 'fixation-stim-6.3',
				display_element:'#stimuli-target',
				fixation_size: cue_size,
				circle_diameter: circle_diameter,
				target_size: [target_size, target_size],
				fixation_color: 'red',
				timing_fixation: 1000,
				timing_post_trial: 0,
        
      }



//ODD "trial_# variables are the prechange trials"
  var trial_1 = {
    timeline_variables: pics,
    target_present: true,
    trial_duration: 250,
    set_size: 8,
    choices: jsPsych.NO_KEYS
  }

  //EVEN "trial_# variables are the post change trials"
  var trial_2 = {
    timeline_variables: pics,
    target_present: false,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 2000,
    trial_duration: 2000
  }
  //"display#" are the identification displays 
  //only occur within change trials 
  var display1 = {
    type: "html-keyboard-response",
    stimulus: `
      <div class="row">
      <div class='column'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>1</strong></p></div>
      <div class="column": right;'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>2</strong></p></div>
      <div class="column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>3</strong></p></div>
      <div class= "column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>4</strong></p></div>
     
    `,
    choices: ['1','2','3','4'],
    correct_response: '4'
  }

//"Noise#" variablesdiscription of noise that will occur with right awnswer"
var noise1 = {
    type: "audio-keyboard-response",
    stimulus: 'sound/speech_green.mp3',
    trial_duration: 250
}
//"if_noise#" variables are the function determining when noise will occur 
  var if_noise1 = {
    timeline: [noise1],
    conditional_function: function(){
      var data = jsPsych.data.get().last(1).values()[0];
      if(jsPsych.pluginAPI.compareKeys(data.response, '4')){
        return true;
      } else {
        return false;
      }
    }
  }

//"trials#" variables are the baseline for the description of a full trial of the visual search circle, This trial is composed of trial_1 to if_noise above
//this trial represents a iconic memory CHANGE trial
  var trials1 = {
    timeline_variables: pics,
    type: 'visual-search-circle',
    target: jsPsych.randomization.sampleWithoutReplacement(yoyo, 1), //one random target picket from set of pictures
    foil: jsPsych.randomization.sampleWithoutReplacement(yoyo, 8), //eight random distractors are picked out, one will be replaced by the target in trial_2
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_1, trial_2, display1, if_noise1], //"trials1" represents the timeline of these 5 combined making up a whole trial 
  }

    var trial_3 = {
    timeline_variables: pics,
    trial_duration: 250,
    target_present: true,
    choices: jsPsych.NO_KEYS,
    set_size: 8,
   
  }

  var trial_4 = {
    timeline_variables: pics,
    target_present: false,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 2000,
    trial_duration: 2000
  } 

  var display2 = {
    type: "html-keyboard-response",
    stimulus: `
      <div class="row">
      <div class='column'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>1</strong></p></div>
      <div class="column": right;'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>2</strong></p></div>
      <div class="column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>3</strong></p></div>
      <div class= "column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>4</strong></p></div>
     
    `,
    choices: ['1','2','3','4'],
    correct_response: '4'
  }

  var noise2 = {
    type: "audio-keyboard-response",
    stimulus: 'sound/speech_green.mp3',
    trial_duration: 250
}

  var if_noise2 = {
    timeline: [noise2],
    conditional_function: function(){
      var data = jsPsych.data.get().last(1).values()[0];
      if(jsPsych.pluginAPI.compareKeys(data.response, '4')){
        return true;
      } else {
        return false;
      }
    }
  }

  //this trial represents a fragile VSTM CHANGE trial
  var trials2 = {
    timeline_variables: pics,
    type: 'visual-search-circle',
    target: jsPsych.randomization.sampleWithoutReplacement(yoyo, 1),
    foil: jsPsych.randomization.sampleWithoutReplacement(yoyo, 8),
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_3, trial_4, display2, if_noise2]
  }
    var trial_5 = {
    timeline_variables: pics,
    choices: jsPsych.NO_KEYS,
    trial_duration: 250,
    target_present: true,
    set_size: 8
  }

  var trial_6 = {
    timeline_variables: pics,
    target_present: false,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 900,
    trial_duration: 2000
  }

  var display3 = {
    type: "html-keyboard-response",
    stimulus: `
      <div class="row">
      <div class='column'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>1</strong></p></div>
      <div class="column": right;'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>2</strong></p></div>
      <div class="column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>3</strong></p></div>
      <div class= "column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>4</strong></p></div>
     
    `,
    choices: ['1','2','3','4'],
    correct_response: '4'
  }

  var noise3 = {
    type: "audio-keyboard-response",
    stimulus: 'sound/speech_green.mp3',
    trial_duration: 250
}

  var if_noise3 = {
    timeline: [noise3],
    conditional_function: function(){
      var data = jsPsych.data.get().last(1).values()[0];
      if(jsPsych.pluginAPI.compareKeys(data.response, '4')){
        return true;
      } else {
        return false;
      }
    }
  }

//this trial represents a working memory CHANGE trial
  var trials3 = {
    timeline_variables: pics,
    type: 'visual-search-circle',
    target:jsPsych.randomization.sampleWithoutReplacement(yoyo, 1),
    foil:jsPsych.randomization.sampleWithoutReplacement(yoyo, 8),
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_5, trial_6, display3, if_noise3],
    
  }

  var trial_7 = {
    timeline_variables: pics,
    target_present: true,
    trial_duration: 250,
    set_size: 8,
    choices: jsPsych.NO_KEYS
  }

  var trial_8 = {
    timeline_variables: pics,
    target_present: true,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 2000,
    trial_duration: 2000
  }
  
//this trial represents a iconic memory NO CHANGE trial
  var trials4 = {
    timeline_variables: pics,
    type: 'visual-search-circle',
    target: jsPsych.randomization.sampleWithoutReplacement(yoyo, 1), 
    foil: jsPsych.randomization.sampleWithoutReplacement(yoyo, 8),   
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_7, trial_8],
  }

    var trial_9 = {
        timeline_variables: pics,
        choices: jsPsych.NO_KEYS,
    trial_duration: 250,
    target_present: true,
    set_size: 8,
   
  }

  var trial_10 = {
    timeline_variables: pics,
    target_present: true,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 2000,
    trial_duration: 2000
  } 

//this trial represents a fragile VSTM NO CHANGE trial
  var trials5 = {
    timeline_variables: pics,
    type: 'visual-search-circle',
    target:jsPsych.randomization.sampleWithoutReplacement(yoyo, 1), 
    foil: jsPsych.randomization.sampleWithoutReplacement(yoyo, 8),  
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_9, trial_10]
  }
    var trial_11 = {
    timeline_variables: pics,
    choices: jsPsych.NO_KEYS,
    trial_duration: 250,
    target_present: true,
    set_size: 8
  }

  var trial_12 = {
    timeline_variables: pics,
    target_present: true,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 900,
    trial_duration: 2000
  }


  //this trial represents a working memory NO CHANGE trial
  var trials6 = {
    timeline_variables: pics,
    type: 'visual-search-circle',
    target: jsPsych.randomization.sampleWithoutReplacement(yoyo, 1),
    foil:jsPsych.randomization.sampleWithoutReplacement(yoyo, 8),    
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_11, trial_12],
    
  }

  var trial_13 = {
    timeline_variables: gpics,
    target_present: true,
    trial_duration: 250,
    set_size: 8,
    choices: jsPsych.NO_KEYS
  }

  var trial_14 = {
    timeline_variables: gpics,
    target_present: false,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 2000,
    trial_duration: 2000
  }
  var display4 = {
    type: "html-keyboard-response",
    stimulus: `
      <div class="row">
      <div class='column'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>1</strong></p></div>
      <div class="column": right;'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>2</strong></p></div>
      <div class="column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>3</strong></p></div>
      <div class= "column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>4</strong></p></div>
     
    `,
    choices: ['1','2','3','4'],
    correct_response: '4'
  }

var noise4 = {
    type: "audio-keyboard-response",
    stimulus: 'sound/speech_green.mp3',
    trial_duration: 250
}

  var if_noise4 = {
    timeline: [noise4],
    conditional_function: function(){
      var data = jsPsych.data.get().last(1).values()[0];
      if(jsPsych.pluginAPI.compareKeys(data.response, '4')){
        return true;
      } else {
        return false;
      }
    }
  }
//this trial represents an iconic memory CHANGE trial w/ GRAYSCALE pics
  var trials7 = {
    timeline_variables: gpics,
    type: 'visual-search-circle',
    target: jsPsych.randomization.sampleWithoutReplacement(gyoyo, 1),
    foil: jsPsych.randomization.sampleWithoutReplacement(gyoyo, 8),
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_13, trial_14, display4, if_noise4],
  }

    var trial_15 = {
    timeline_variables: gpics,
    trial_duration: 250,
    target_present: true,
    choices: jsPsych.NO_KEYS,
    set_size: 8,
   
  }

  var trial_16 = {
    timeline_variables: gpics,
    target_present: false,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 2000,
    trial_duration: 2000
  } 

  var display5 = {
    type: "html-keyboard-response",
    stimulus: `
      <div class="row">
      <div class='column'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>1</strong></p></div>
      <div class="column": right;'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>2</strong></p></div>
      <div class="column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>3</strong></p></div>
      <div class= "column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>4</strong></p></div>
     
    `,
    choices: ['1','2','3','4'],
    correct_response: '4'
  }

  var noise5 = {
    type: "audio-keyboard-response",
    stimulus: 'sound/speech_green.mp3',
    trial_duration: 250
}

  var if_noise5 = {
    timeline: [noise5],
    conditional_function: function(){
      var data = jsPsych.data.get().last(1).values()[0];
      if(jsPsych.pluginAPI.compareKeys(data.response, '4')){
        return true;
      } else {
        return false;
      }
    }
  }
//this trial represents a fragile VSTM CHANGE trial w/ GRAYSCALE pics
  var trials8 = {
    timeline_variables: gpics,
    type: 'visual-search-circle',
    target: jsPsych.randomization.sampleWithoutReplacement(gyoyo, 1),
    foil: jsPsych.randomization.sampleWithoutReplacement(gyoyo, 8),
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_15, trial_16, display5, if_noise5]
  }
    var trial_17 = {
    timeline_variables: gpics,
    choices: jsPsych.NO_KEYS,
    trial_duration: 250,
    target_present: true,
    set_size: 8
  }

  var trial_18 = {
    timeline_variables: gpics,
    target_present: false,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 900,
    trial_duration: 2000
  }

  var display6 = {
    type: "html-keyboard-response",
    stimulus: `
      <div class="row">
      <div class='column'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>1</strong></p></div>
      <div class="column": right;'><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>2</strong></p></div>
      <div class="column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>3</strong></p></div>
      <div class= "column"><img src='img/blue.png', style="width:100%"></img>
      <p class='small'><strong>4</strong></p></div>
     
    `,
    choices: ['1','2','3','4'],
    correct_response: '4'
  }

  var noise6 = {
    type: "audio-keyboard-response",
    stimulus: 'sound/speech_green.mp3',
    trial_duration: 250
}

  var if_noise6 = {
    timeline: [noise6],
    conditional_function: function(){
      var data = jsPsych.data.get().last(1).values()[0];
      if(jsPsych.pluginAPI.compareKeys(data.response, '4')){
        return true;
      } else {
        return false;
      }
    }
  }
//this trial represents an working memory CHANGE trial w/ GRAYSCALE pics
  var trials9 = {
    timeline_variables: gpics,
    type: 'visual-search-circle',
    target:jsPsych.randomization.sampleWithoutReplacement(gyoyo, 1),
    foil:jsPsych.randomization.sampleWithoutReplacement(gyoyo, 8),
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_17, trial_18, display6, if_noise6],
    
  }

  var trial_19 = {
    timeline_variables: gpics,
    target_present: true,
    trial_duration: 250,
    set_size: 8,
    choices: jsPsych.NO_KEYS
  }

  var trial_20 = {
    timeline_variables: gpics,
    target_present: true,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 2000,
    trial_duration: 2000
  }
  
//this trial represents an iconic memory NO CHANGE trial w/ GRAYSCALE pics
  var trials10 = {
    timeline_variables: gpics,
    type: 'visual-search-circle',
    target: jsPsych.randomization.sampleWithoutReplacement(gyoyo, 1), 
    foil: jsPsych.randomization.sampleWithoutReplacement(gyoyo, 8),   
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_19, trial_20],
  }

    var trial_21 = {
        timeline_variables: gpics,
        choices: jsPsych.NO_KEYS,
    trial_duration: 250,
    target_present: true,
    set_size: 8,
   
  }

  var trial_22 = {
    timeline_variables: gpics,
    target_present: true,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 2000,
    trial_duration: 2000
  } 

//this trial represents an fragile VSTM NO CHANGE trial w/ GRAYSCALE pics
  var trials11 = {
    timeline_variables: gpics,
    type: 'visual-search-circle',
    target:jsPsych.randomization.sampleWithoutReplacement(gyoyo, 1), 
    foil: jsPsych.randomization.sampleWithoutReplacement(gyoyo, 8),  
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_21, trial_22]
  }
    var trial_23 = {
    timeline_variables: gpics,
    choices: jsPsych.NO_KEYS,
    trial_duration: 250,
    target_present: true,
    set_size: 8
  }

  var trial_24 = {
    timeline_variables: gpics,
    target_present: true,
    target_present_key: 'j',
    target_absent_key: 'f'  ,
    set_size: 8,
    fixation_duration: 900,
    trial_duration: 2000
  }


  //this trial represents a working memory NO CHANGE trial w/ GRAYSCALE pics
  var trials12 = {
    timeline_variables: gpics,
    type: 'visual-search-circle',
    target: jsPsych.randomization.sampleWithoutReplacement(gyoyo, 1),
    foil:jsPsych.randomization.sampleWithoutReplacement(gyoyo, 8),    
    randomize_order: true,
    fixation_image: 'img/red dot.png',
    fixation_duration: 0,
    timeline: [pre_trial, trial_23, trial_24],
    
  }

//randomizing trials
var myArray = [trials1, trials2, trials3, trials4, trials5, trials6, trials7, trials7, trials8, trials9, trials10, trials11, trials12];
var shuffledArray = jsPsych.randomization.repeat(myArray, 3);

  var trials = {
    timeline:shuffledArray

    }

 var intros_time = {
     timeline:intros
   }


   

    //final timeline//
jsPsych.init({
    timeline: [intros_time, trials],
    on_finish: function() {
      jsPsych.data.displayData();
    }
  });
</script>

</html>